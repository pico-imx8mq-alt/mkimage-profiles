#!/bin/sh -efu

conf=/etc/X11/xorg.conf

cat > "$conf" <<EOF
Section "Device"
	Identifier	"sm750"
	Driver	"btsm750"
	Option	"ForceBackingStore"	"True"
	Option	"UseDMA"	"True"
	Option	"ShortBuffer"	"False"
EndSection

Section "Monitor"
	Identifier	"ACRDE03"
	ModelName	"G227HQL"
	DisplaySize	480 270
	HorizSync	31 - 75
	VertRefresh	56 - 75
	Option	"DPMS"	"True"
	Modeline	"800x600@60.CVT" 38.25 800 832 912 1024 600 603 607 624 -hsync +vsync
	Modeline	"1280x1024@60.CVT" 109.0 1280 1360 1496 1712 1024 1027 1034 1063 -hsync +vsync
	Modeline	"1280x720@60.CVT" 74.5 1280 1344 1472 1664 720 723 728 748 -hsync +vsync
	Modeline	"1280x800@60.CVT" 83.5 1280 1352 1480 1680 800 803 809 831 -hsync +vsync
	Modeline	"1440x900@60.CVT" 106.5 1440 1520 1672 1904 900 903 909 934 -hsync +vsync
	Modeline	"1680x1050@60.CVT" 146.25 1680 1784 1960 2240 1050 1053 1059 1089 -hsync +vsync
	Modeline	"1920x1080@60.CVT" 173.0 1920 2048 2248 2576 1080 1083 1088 1120 -hsync +vsync
	Modeline	"1920x1080@60.2" 148.5 1920 2008 2052 2200 1080 1084 1089 1125 -HSync +VSync
EndSection

Section "Screen"
	Identifier	"Screen0"
	Device	"sm750"
	Monitor	"ACRDE03"
	DefaultDepth	24
	SubSection	"Display"
		Modes	"1920x1080@60.2" "1920x1080@60.CVT" "1680x1050@60.CVT" "1440x900@60.CVT" "1280x800@60.CVT" "1280x720@60.CVT" "1280x1024@60.CVT" "800x600@60.CVT"
		Viewport	0 0
		Depth	24
	EndSubSection
EndSection
EOF

chmod 644 "$conf"

exit 0
